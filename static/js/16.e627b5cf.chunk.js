(this["webpackJsonppancake-frontend"]=this["webpackJsonppancake-frontend"]||[]).push([[16],{1140:function(e,t,n){"use strict";n.r(t);var a=n(4),i=n.n(a),c=n(31),r=n(17),s=n(0),o=n(846),l=n(847),u=n(142),d=n(820),j=n(872),b=n(793),x=n(797),m=n(794),f=n(809),O=n(813),p=n(96),h=n(35),g=n(5),v=Object(b.a)((function(e){return{container:{marginBottom:110},cardItem:{border:"2px solid ".concat(e.palette.divider),padding:"20px",cursor:"pointer",fontSize:16},more:{cursor:"pointer",display:"flex",alignItems:"center",fontWeight:"bold","& .iconfont":{marginLeft:5}}}})),y=function(e){var t=e.data,n=v();return Object(g.jsxs)("div",{className:n.container,children:[Object(g.jsx)(O.a,{title:"Mystery Box ",children:Object(g.jsxs)("div",{className:n.more,onClick:function(){(null===t||void 0===t?void 0:t.id)&&p.a.push("".concat(h.a.MYSTERY_BOX_DETAIL,"?id=").concat(t.id))},children:["MORE",Object(g.jsx)(x.a,{baseClassName:"iconfont dj-forward"})]})}),Object(g.jsx)(m.a,{container:!0,spacing:2,children:((null===t||void 0===t?void 0:t.work_arr)||new Array(4).fill("")).map((function(e,t){return Object(g.jsx)(m.a,{item:!0,xs:6,md:3,children:Object(g.jsx)(f.a,{data:e})},e.id||t)}))})]})},N=n(802),w=n(19),I=Object(b.a)((function(e){return{container:{marginBottom:110},contentTitle:{fontSize:24,color:e.palette.primary.main,fontWeight:600,marginBottom:20},contentText:{color:e.palette.text.secondary,fontSize:16,lineHeight:1.5}}})),C=function(e){var t=e.introduction,n=I();return Object(g.jsxs)("div",{className:n.container,children:[Object(g.jsx)(O.a,{title:"Mystery Box Details"}),Object(g.jsx)("div",{className:Object(w.a)(n.contentText,"rich-text"),children:t?Object(g.jsx)("div",{dangerouslySetInnerHTML:{__html:t}}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(N.a,{rows:4}),Object(g.jsx)(N.a,{width:"80%"}),Object(g.jsx)(N.a,{width:"50%"})]})})]})},S=n(832),B=Object(o.a)("div")({});t.default=function(){var e=Object(s.useState)({}),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(d.a)().fastRefresh,b=function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)({id:1,work_num:4});case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){b()}),[o]),Object(g.jsx)(B,{children:Object(g.jsx)(S.a.Provider,{value:{onSuccess:b},children:Object(g.jsxs)(u.a,{children:[Object(g.jsx)(j.a,{data:n}),Object(g.jsx)(y,{data:n}),Object(g.jsx)(C,{introduction:n.introduction})]})})})}},813:function(e,t,n){"use strict";var a=n(13),i=(n(0),n(793)),c=n(794),r=n(19),s=n(5),o=Object(i.a)((function(e){return{container:{background:"linear-gradient(90deg, #161616 0%, rgba(0, 0, 0, 0) 100%)",padding:"24px 30px",marginBottom:"40px"},noStyle:{padding:0,background:"transparent"},titleText:{fontFamily:"text-bold",fontSize:32}}}));t.a=function(e){var t=e.title,n=e.children,i=(e.noStyle,o());return Object(s.jsxs)(c.a,{container:!0,className:Object(r.a)(i.container,Object(a.a)({},i.noStyle,!0)),alignItems:"center",justifyContent:"space-between",children:[Object(s.jsx)("div",{className:i.titleText,children:t}),Object(s.jsx)("div",{children:n})]})}},820:function(e,t,n){"use strict";var a=n(0),i=n(257);t.a=function(){var e=Object(a.useContext)(i.a);return{fastRefresh:e.fast,slowRefresh:e.slow}}},823:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var a=n(66),i=function(e){return a.a.request({url:"/v1/nft/page/self",method:"get",params:e})},c=function(e){return a.a.request({url:"/v1/nft/page/user/by/work",method:"get",params:e})},r=function(e){return a.a.request({url:"/v1/nft/by/tx",method:"get",params:e})}},832:function(e,t,n){"use strict";var a=n(0),i=n.n(a).a.createContext({});t.a=i},847:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(66),i=function(e){return a.a.request({url:"/v1/blind-box",method:"get",params:e})}},848:function(e,t,n){},872:function(e,t,n){"use strict";var a=n(0),i=n(793),c=n(794),r=n(810),s=n.n(r),o=n(875),l=n.n(o),u=n(19),d=(n(848),n(5)),j=Object(i.a)((function(){return{container:{fontSize:8},hintText:{fontSize:16,marginBottom:10}}})),b=function(e){var t=e.title,n=e.time,i=e.className,c=Object(a.useRef)(),r=j(),o=Object(a.useRef)(null),b=Object(a.useMemo)((function(){return n?s()(n).toDate():s()().toDate()}),[n]);return Object(a.useEffect)((function(){return o.current=new l.a(c.current,new Date,{face:"DayCounter",countdown:!0,autoStart:!1,stopAt:new Date}),function(){var e;(null===(e=o.current.timer)||void 0===e?void 0:e.isRunning)&&o.current.stop()}}),[]),Object(a.useEffect)((function(){var e=s()(b).diff(s()(),"second");o.current&&(o.current.originalValue=b,e>0&&o.current.start())}),[b]),Object(d.jsxs)("div",{className:Object(u.a)(r.container,i),children:[t&&Object(d.jsx)("div",{className:r.hintText,children:t}),Object(d.jsx)("div",{ref:c})]})},x=n(802),m=n(247),f=n(143),O=n(17),p=n(1135),h=n(876),g=n.n(h),v=n(53),y=n(1134),N=n(877),w=n.n(N),I=n(22),C=n(4),S=n.n(C),B=n(31),k=n(39),z=n(109),T=n(144),W=n(796),E=n(97),F=Object(i.a)((function(e){return{btn:{padding:"4px 16px",lineHeight:"24px"}}})),_=function(e){var t=Object(z.a)(!0),n=t.login,i=t.logout,c=Object(a.useState)(!1),r=Object(O.a)(c,2),s=r[0],o=r[1],l=F(),u=Object(T.a)().library,j=Object(v.d)(),b=(Object(E.a)().toastInfo,Object(v.b)()),x=function(){var e=Object(B.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:o(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=Object(k.o)(x,i).onPresentConnectModal;return Object(a.useEffect)((function(){j&&u.provider&&s&&(o(!1),b())}),[j,s,u]),Object(d.jsx)(W.a,Object(I.a)(Object(I.a)({onClick:m,className:l.btn,variant:"contained"},e),{},{children:"Unlock Wallet"}))},R=n(240),M=n(912),A=n(50),D=n.n(A),L=n(184),H=n(821),P=(n(67),n(822),n(187)),q=(n(194),n(155),n(820)),U=function(){var e=Object(v.e)(),t=Object(H.b)(),n=function(){var e=Object(a.useState)(0),t=Object(O.a)(e,2),n=t[0],i=t[1],c=Object(v.a)(),r=Object(q.a)().fastRefresh;return Object(a.useEffect)((function(){c?function(){var e=Object(B.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.getBalance(c);case 2:t=e.sent,i(Object(L.a)(new D.a(t._hex),18,18));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():i(0)}),[c,r]),n}();return function(){var a=Object(B.a)(S.a.mark((function a(i,c,r){var s,o,l,u;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=[i],o=Object(L.b)(new D.a(i).times(c)),!(Object(L.b)(n)<=o)){a.next=5;break}throw new Error(" Insufficient Balance");case 5:if(!e.inviter_address){a.next=14;break}return s.push(e.inviter_address),s.push(r),a.next=10,t.mintByInvite.apply(t,s.concat([{value:o}]));case 10:return l=a.sent,a.abrupt("return",l);case 14:return s.push(r),a.next=17,t.mint.apply(t,s.concat([{value:o}]));case 17:return u=a.sent,a.abrupt("return",u);case 19:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}()},J=n(812),X=Object(i.a)((function(e){return{content:{padding:"0 30px 30px"},boxInfo:{display:"flex",alignItems:"center",padding:"20px 0",borderBottom:"1px solid #0F0F10"},imgContainer:{background:"#0F0F10",display:"flex",alignItems:"center",flex:"0 0 140px",justifyContent:"center",position:"relative"},imgBgCover:{width:"100%",height:110},imgBgLoading:{position:"absolute",zIndex:1,height:"100%"},boxInfoText:{flex:1,margin:"0 20px"},boxInfoPrice:{color:e.palette.primary.main,fontFamily:"text-bold"},boxInfoTitle:{fontFamily:"text-bold",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginBottom:10},boxInfoDescription:{color:e.palette.text.secondary,maxHeight:42,overflow:"hidden",lineHeight:"21px"},button:{fontSize:16,padding:"11px 22px"},amountContainer:{padding:"20px 0 120px 160px"},amount:{fontFamily:"number",fontWeight:"bold"},totalPriceContainer:{marginBottom:30,textAlign:"right",paddingLeft:160},totalPrice:{fontFamily:"number",fontWeight:"bold",marginBottom:8,color:e.palette.primary.main,fontSize:32,display:"flex",alignItems:"center",justifyContent:"flex-end"},ethIcon:{marginRight:10}}})),Y=function(e){var t=e.data,n=e.amount,i=e.onSuccess,r=Object(R.a)(e,["data","amount","onSuccess"]),s=X(),o=Object(a.useState)(!1),l=Object(O.a)(o,2),u=l[0],j=l[1],b=Object(E.a)().toastError,x=U(),p=Object(a.useMemo)((function(){return Object(L.a)(n*t.price,0)}),[n,t]),h=function(){var e=Object(B.a)(S.a.mark((function e(){var a,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,x(n,new D.a(1e3).div(new D.a(10).pow(18)),t.id);case 4:a=e.sent,c=a.hash,j(!1),i(c),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),j(!1),b(e.t0.message),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)(J.a,Object(I.a)(Object(I.a)({},r),{},{maxWidth:"sm",fullWidth:!0,title:"Order of Mystery Box",children:Object(d.jsxs)("div",{className:s.content,children:[Object(d.jsxs)("div",{className:s.boxInfo,children:[Object(d.jsxs)("div",{className:s.imgContainer,children:[Object(d.jsx)("img",{src:f.a,className:s.imgBgLoading,alt:""}),Object(d.jsx)("img",{src:t.cover_resource.url,className:s.imgBgCover,alt:""})]}),Object(d.jsxs)("div",{className:s.boxInfoText,children:[Object(d.jsx)("div",{className:s.boxInfoTitle,children:t.title}),Object(d.jsx)("div",{className:s.boxInfoDescription,children:t.sub_title})]}),Object(d.jsxs)("div",{className:s.boxInfoPrice,children:[t.price," ETH"]})]}),Object(d.jsxs)(c.a,{container:!0,alignItems:"center",className:s.amountContainer,justifyContent:"space-between",children:[Object(d.jsx)(c.a,{item:!0,children:Object(d.jsx)(M.a,{fontWeight:"600",children:"Amount"})}),Object(d.jsx)(c.a,{item:!0,children:Object(d.jsxs)(M.a,{className:s.amount,children:["X",n]})})]}),Object(d.jsxs)(c.a,{container:!0,alignItems:"top",className:s.totalPriceContainer,justifyContent:"space-between",children:[Object(d.jsx)(c.a,{item:!0,children:Object(d.jsx)(M.a,{fontWeight:"600",children:"Total"})}),Object(d.jsxs)(c.a,{item:!0,children:[Object(d.jsx)("div",{children:Object(d.jsxs)("div",{className:s.totalPrice,children:[Object(d.jsx)(m.a,{className:s.ethIcon}),p," ETH"]})}),Object(d.jsx)(M.a,{color:"text.fourth",fontSize:"14px",children:"Live exchange rate"})]})]}),Object(d.jsx)(y.a,{size:"large",loading:u,variant:"contained",fullWidth:!0,className:s.button,onClick:h,children:"Check out"})]})}))},V=n(1114),G=n(823),K=n(96),Q=n(35),Z=n(832),$=Object(i.a)((function(e){return{content:{},imgContainer:{background:"#0F0F10",textAlign:"center","& img":{height:350}},loadingContent:{padding:"40px 0",textAlign:"center"},successContent:{padding:"30px 20px",textAlign:"center"},successText:{fontSize:24,marginBottom:30,fontWeight:"bold"},whiteBtn:{background:"#fff",color:"#000","&:hover":{background:"#fff"}}}})),ee=function(e){var t=e.txId,n=Object(R.a)(e,["txId"]),i=$(),c=Object(a.useContext)(Z.a).onSuccess,r=Object(a.useState)("loading"),s=Object(O.a)(r,2),o=s[0],l=s[1],u=Object(q.a)().fastRefresh,j=function(){var e=Object(B.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.b)({tx:t});case 2:(null===(n=e.sent)||void 0===n?void 0:n.success)&&(l("success"),c&&c());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n.open&&t&&"loading"===o&&j()}),[u]),Object(d.jsx)(J.a,Object(I.a)(Object(I.a)({},n),{},{maxWidth:"sm",maskClosable:!1,fullWidth:!0,title:"Completing The Trade\u2026",children:Object(d.jsxs)("div",{className:i.content,children:[Object(d.jsx)("div",{className:i.imgContainer,children:Object(d.jsx)("img",{src:"loading"===o?f.a:f.b,alt:""})}),"loading"===o&&Object(d.jsxs)("div",{className:i.loadingContent,children:[Object(d.jsx)(M.a,{color:"text.third",marginBottom:"10px",children:"Please complete this"}),Object(d.jsx)(M.a,{color:"text.fourth",marginBottom:"10px",children:"transaction in your wallet"}),Object(d.jsx)(V.a,{size:30,color:"primary"})]}),"success"===o&&Object(d.jsxs)("div",{className:i.successContent,children:[Object(d.jsx)(M.a,{className:i.successText,children:"Purchase successful!"}),Object(d.jsx)(W.a,{variant:"contained",size:"large",fullWidth:!0,onClick:function(){K.a.push(Q.a.MINE)},children:"Open backpack"})]})]})}))},te=Object(i.a)((function(e){return{container:{marginTop:50},button:{width:"100%",fontSize:16,padding:"11px 22px"},actionIcon:{background:e.palette.background.default,height:50,width:50,color:e.palette.primary.main,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:e.shape.borderRadius,"&:not(.disabled):active":{opacity:.5},"&.disabled":{color:e.palette.text.secondary}},input:{margin:"0 10px",width:30,fontSize:24,fontWeight:"bold","& input":{textAlign:"center"}},disabled:{pointerEvents:"none",opacity:.5}}})),ne=function(e){var t=e.max,n=e.data,i=te(),r=Object(a.useState)(1),o=Object(O.a)(r,2),l=o[0],j=o[1],b=Object(v.a)(),x=Object(E.a)().toastWarning,m=Object(a.useState)(""),f=Object(O.a)(m,2),h=f[0],N=f[1],I=Object(a.useState)(!1),C=Object(O.a)(I,2),S=C[0],B=C[1],k=Object(a.useState)(!1),z=Object(O.a)(k,2),T=z[0],W=z[1],F=Object(a.useMemo)((function(){return s()(n.end_time).valueOf()-s()().valueOf()<=0||0===(null===n||void 0===n?void 0:n.remaining)}),[n]);return Object(d.jsxs)("div",{className:i.container,children:[Object(d.jsx)(Y,{open:S,onClose:function(){B(!1)},onSuccess:function(e){B(!1),W(!0),N(e)},data:n,amount:l}),T&&Object(d.jsx)(ee,{open:T,txId:h,onClose:function(){W(!1),N("")}}),Object(d.jsxs)(c.a,{spacing:4,container:!0,children:[Object(d.jsx)(c.a,{item:!0,xs:8,alignItems:"center",children:b?Object(d.jsx)(y.a,{size:"large",variant:"contained",className:i.button,disabled:F,onClick:function(){l>n.remaining?x("Insufficient quantity"):B(!0)},children:"Buy"}):Object(d.jsx)(_,{size:"large",variant:"contained",className:i.button})}),Object(d.jsxs)(c.a,{item:!0,container:!0,xs:!0,alignItems:"center",className:F?i.disabled:"",children:[Object(d.jsx)(c.a,{item:!0,className:Object(u.a)(i.actionIcon,{disabled:1===l}),onClick:function(){1!==l&&j(l-1)},children:Object(d.jsx)(g.a,{})}),Object(d.jsx)(c.a,{item:!0,children:Object(d.jsx)(p.a,{readOnly:!0,value:l,type:"text",onInput:function(e){var n=e.target.value;/0-9/.test(n)&&Number(n)<t&&Number(n)&&j(n)},className:i.input})}),Object(d.jsx)(c.a,{item:!0,onClick:function(){l<t?j(l+1):x("Buy up to 5")},className:Object(u.a)(i.actionIcon,{disabled:l===t}),children:Object(d.jsx)(w.a,{})})]})]})]})},ae=Object(i.a)((function(e){return{container:{margin:"80px 0"},imgContainer:{flex:"0 0 780px",maxWidth:"100%",height:620},imgBg:{position:"relative",height:"100%","&:after":{content:'""',width:"100%",height:50,bottom:-50,left:0,position:"absolute",background:"url(/images/blindBox/boxBg.png) no-repeat center bottom",backgroundSize:"cover",zIndex:-1}},selloutBg:{position:"absolute",zIndex:1,width:"80%",transform:"translate(-50%,-50%)",left:"50%",top:"50%"},imgBgCover:{width:"100%",height:"100%"},imgBgLoading:{position:"absolute",zIndex:1},partTitle:{fontFamily:"text-bold",fontSize:40,fontWeight:600,lineHeight:"58px",color:e.palette.text.third,marginBottom:6},description:{fontSize:"16px",lineHeight:"24px"},price:{fontFamily:"number",fontWeight:600,fontSize:32,color:e.palette.primary.main,margin:"30px 0 15px"},ethIcon:{marginRight:5},priceUnit:{color:e.palette.text.secondary,fontSize:14,verticalAlign:"super",marginLeft:4},remaining:{marginBottom:10,fontSize:16,display:"flex",alignItems:"center"},remainingCount:{fontFamily:"text-bold"},remainingSellout:{color:"#FE126A",fontFamily:"text-bold"},opacity6:{opacity:.6}}}));t.a=function(e){var t=e.data,n=ae(),i=Object(a.useMemo)((function(){var e=s()(t.end_time).diff(s()(),"second");return 0===(null===t||void 0===t?void 0:t.remaining)||e<0}),[t]);return Object(d.jsx)("div",{className:n.container,children:Object(d.jsxs)(c.a,{spacing:6,container:!0,children:[Object(d.jsx)(c.a,{item:!0,md:12,xl:!0,lg:!0,xs:12,sm:12,className:n.imgContainer,children:t.id?Object(d.jsxs)("div",{className:n.imgBg,children:[Object(d.jsx)("img",{src:f.a,className:n.imgBgLoading,alt:""}),Object(d.jsx)("img",{src:t.cover_resource.url,className:n.imgBgCover,alt:""}),i&&Object(d.jsx)("img",{src:"/images/blindBox/sellout.png",className:n.selloutBg,alt:""})]}):Object(d.jsx)(x.a,{height:"100%",variant:"rectangular"})}),t.id?Object(d.jsxs)(c.a,{item:!0,xs:!0,container:!0,flexDirection:"column",flexWrap:"initial",children:[Object(d.jsxs)(c.a,{item:!0,xs:!0,children:[Object(d.jsx)("div",{className:n.partTitle,children:t.title}),Object(d.jsx)("div",{className:n.description,children:t.sub_title}),Object(d.jsxs)("div",{className:n.price,children:[Object(d.jsx)(m.a,{className:n.ethIcon}),t.price,Object(d.jsx)("span",{className:n.priceUnit,children:"ETH"})]}),Object(d.jsxs)("div",{className:n.remaining,children:[Object(d.jsx)("span",{className:i?n.opacity6:"",children:"The remaining:"}),Object(d.jsxs)("div",{className:0===t.remaining?n.remainingSellout:"",children:["\xa0",Object(d.jsx)("span",{className:n.remainingCount,children:t.remaining})," Left"]})]})]}),Object(d.jsxs)(c.a,{item:!0,children:[Object(d.jsx)(b,{title:"Biding Ends In:",time:null===t||void 0===t?void 0:t.end_time,className:i?n.opacity6:""}),Object(d.jsx)(ne,{max:5,data:t})]})]}):Object(d.jsxs)(c.a,{item:!0,xs:!0,container:!0,flexDirection:"column",flexWrap:"initial",children:[Object(d.jsxs)(c.a,{item:!0,xs:!0,children:[Object(d.jsx)(x.a,{}),Object(d.jsx)(x.a,{}),Object(d.jsx)(x.a,{}),Object(d.jsx)(x.a,{width:"60%"}),Object(d.jsx)(x.a,{width:"40%"})]}),Object(d.jsxs)(c.a,{item:!0,children:[Object(d.jsx)(x.a,{width:"60%"}),Object(d.jsx)(x.a,{width:"60%"}),Object(d.jsx)(x.a,{})]})]})]})})}}}]);